import { ConnectedPositioningStrategy } from './connected-positioning-strategy';
import { Util } from '../utilities';
export class BaseFitPositionStrategy extends ConnectedPositioningStrategy {
    /** @inheritdoc */
    position(contentElement, size, document, initialCall, target) {
        const targetElement = target || this.settings.target;
        const rects = super.calculateElementRectangles(contentElement, targetElement);
        const connectedFit = {};
        if (initialCall) {
            connectedFit.targetRect = rects.targetRect;
            connectedFit.contentElementRect = rects.elementRect;
            this._initialSettings = this._initialSettings || Object.assign({}, this.settings);
            this.settings = Object.assign({}, this._initialSettings);
            connectedFit.viewPortRect = Util.getViewportRect(document);
            this.updateViewPortFit(connectedFit);
            if (this.shouldFitInViewPort(connectedFit)) {
                this.fitInViewport(contentElement, connectedFit);
            }
        }
        this.setStyle(contentElement, rects.targetRect, rects.elementRect, connectedFit);
    }
    /**
     * Checks if element can fit in viewport and updates provided connectedFit
     * with the result
     * @param connectedFit connectedFit to update
     */
    updateViewPortFit(connectedFit) {
        connectedFit.left = this.calculateLeft(connectedFit.targetRect, connectedFit.contentElementRect, this.settings.horizontalStartPoint, this.settings.horizontalDirection, connectedFit.horizontalOffset ? connectedFit.horizontalOffset : 0);
        connectedFit.right = connectedFit.left + connectedFit.contentElementRect.width;
        connectedFit.fitHorizontal = {
            back: Math.round(connectedFit.left),
            forward: Math.round(connectedFit.viewPortRect.width - connectedFit.right)
        };
        connectedFit.top = this.calculateTop(connectedFit.targetRect, connectedFit.contentElementRect, this.settings.verticalStartPoint, this.settings.verticalDirection, connectedFit.verticalOffset ? connectedFit.verticalOffset : 0);
        connectedFit.bottom = connectedFit.top + connectedFit.contentElementRect.height;
        connectedFit.fitVertical = {
            back: Math.round(connectedFit.top),
            forward: Math.round(connectedFit.viewPortRect.height - connectedFit.bottom)
        };
    }
    /**
     * Calculates the position of the left border of the element if it gets positioned
     * with provided start point and direction
     * @param targetRect Rectangle of the target where element is attached
     * @param elementRect Rectangle of the element
     * @param startPoint Start point of the target
     * @param direction Direction in which to show the element
     */
    calculateLeft(targetRect, elementRect, startPoint, direction, offset) {
        return targetRect.right + targetRect.width * startPoint + elementRect.width * direction + offset;
    }
    /**
     * Calculates the position of the top border of the element if it gets positioned
     * with provided position settings related to the target
     * @param targetRect Rectangle of the target where element is attached
     * @param elementRect Rectangle of the element
     * @param startPoint Start point of the target
     * @param direction Direction in which to show the element
     */
    calculateTop(targetRect, elementRect, startPoint, direction, offset) {
        return targetRect.bottom + targetRect.height * startPoint + elementRect.height * direction + offset;
    }
    /**
     * Returns whether the element should fit in viewport
     * @param connectedFit connectedFit object containing all necessary parameters
     */
    shouldFitInViewPort(connectedFit) {
        return connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0 ||
            connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1maXQtcG9zaXRpb24tc3RyYXRlZ3kuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvaWduaXRldWktYW5ndWxhci9pZ25pdGV1aS1hbmd1bGFyL3Byb2plY3RzL2lnbml0ZXVpLWFuZ3VsYXIvc3JjLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL292ZXJsYXkvcG9zaXRpb24vYmFzZS1maXQtcG9zaXRpb24tc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDaEYsT0FBTyxFQUFrRSxJQUFJLEVBQXNDLE1BQU0sY0FBYyxDQUFDO0FBRXhJLE1BQU0sT0FBZ0IsdUJBQXdCLFNBQVEsNEJBQTRCO0lBSTlFLGtCQUFrQjtJQUNsQixRQUFRLENBQUMsY0FBMkIsRUFBRSxJQUFVLEVBQUUsUUFBbUIsRUFBRSxXQUFxQixFQUFFLE1BQTRCO1FBQ3RILE1BQU0sYUFBYSxHQUFHLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUNyRCxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsMEJBQTBCLENBQUMsY0FBYyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBQzlFLE1BQU0sWUFBWSxHQUFpQixFQUFFLENBQUM7UUFDdEMsSUFBSSxXQUFXLEVBQUU7WUFDYixZQUFZLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7WUFDM0MsWUFBWSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUM7WUFDcEQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDbEYsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsZ0JBQWdC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LENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxZQUFZLENBQUMsYUFBYSxDQUFDLE9BQU8sR0FBRyxDQUFDO1lBQ2hGLFlBQVksQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxZQUFZLENBQUMsV0FBVyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDbEYsQ0FBQztDQVVKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGVkUG9zaXRpb25pbmdTdHJhdGVneSB9IGZyb20gJy4vY29ubmVjdGVkLXBvc2l0aW9uaW5nLXN0cmF0ZWd5JztcbmltcG9ydCB7IEhvcml6b250YWxBbGlnbm1lbnQsIFZlcnRpY2FsQWxpZ25tZW50LCBQb3NpdGlvblNldHRpbmdzLCBTaXplLCBVdGlsLCBDb25uZWN0ZWRGaXQsIE91dE9mVmlld1BvcnQsIFBvaW50IH0gZnJvbSAnLi4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VGaXRQb3NpdGlvblN0cmF0ZWd5IGV4dGVuZHMgQ29ubmVjdGVkUG9zaXRpb25pbmdTdHJhdGVneSB7XG4gICAgcHJvdGVjdGVkIF9pbml0aWFsU2l6ZTogU2l6ZTtcbiAgICBwcm90ZWN0ZWQgX2luaXRpYWxTZXR0aW5nczogUG9zaXRpb25TZXR0aW5ncztcblxuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIHBvc2l0aW9uKGNvbnRlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgc2l6ZTogU2l6ZSwgZG9jdW1lbnQ/OiBEb2N1bWVudCwgaW5pdGlhbENhbGw/OiBib29sZWFuLCB0YXJnZXQ/OiBQb2ludCB8IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSB0YXJnZXQgfHwgdGhpcy5zZXR0aW5ncy50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHJlY3RzID0gc3VwZXIuY2FsY3VsYXRlRWxlbWVudFJlY3RhbmdsZXMoY29udGVudEVsZW1lbnQsIHRhcmdldEVsZW1lbnQpO1xuICAgICAgICBjb25zdCBjb25uZWN0ZWRGaXQ6IENvbm5lY3RlZEZpdCA9IHt9O1xuICAgICAgICBpZiAoaW5pdGlhbENhbGwpIHtcbiAgICAgICAgICAgIGNvbm5lY3RlZEZpdC50YXJnZXRSZWN0ID0gcmVjdHMudGFyZ2V0UmVjdDtcbiAgICAgICAgICAgIGNvbm5lY3RlZEZpdC5jb250ZW50RWxlbWVudFJlY3QgPSByZWN0cy5lbGVtZW50UmVjdDtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxTZXR0aW5ncyA9IHRoaXMuX2luaXRpYWxTZXR0aW5ncyB8fCBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9pbml0aWFsU2V0dGluZ3MpO1xuICAgICAgICAgICAgY29ubmVjdGVkRml0LnZpZXdQb3J0UmVjdCA9IFV0aWwuZ2V0Vmlld3BvcnRSZWN0KGRvY3VtZW50KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld1BvcnRGaXQoY29ubmVjdGVkRml0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZEZpdEluVmlld1BvcnQoY29ubmVjdGVkRml0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZml0SW5WaWV3cG9ydChjb250ZW50RWxlbWVudCwgY29ubmVjdGVkRml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0eWxlKGNvbnRlbnRFbGVtZW50LCByZWN0cy50YXJnZXRSZWN0LCByZWN0cy5lbGVtZW50UmVjdCwgY29ubmVjdGVkRml0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgZWxlbWVudCBjYW4gZml0IGluIHZpZXdwb3J0IGFuZCB1cGRhdGVzIHByb3ZpZGVkIGNvbm5lY3RlZEZpdFxuICAgICAqIHdpdGggdGhlIHJlc3VsdFxuICAgICAqIEBwYXJhbSBjb25uZWN0ZWRGaXQgY29ubmVjdGVkRml0IHRvIHVwZGF0ZVxuICAgICAqL1xuICAgIHByb3RlY3RlZCB1cGRhdGVWaWV3UG9ydEZpdChjb25uZWN0ZWRGaXQ6IENvbm5lY3RlZEZpdCkge1xuICAgICAgICBjb25uZWN0ZWRGaXQubGVmdCA9IHRoaXMuY2FsY3VsYXRlTGVmdChcbiAgICAgICAgICAgIGNvbm5lY3RlZEZpdC50YXJnZXRSZWN0LFxuICAgICAgICAgICAgY29ubmVjdGVkRml0LmNvbnRlbnRFbGVtZW50UmVjdCxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaG9yaXpvbnRhbFN0YXJ0UG9pbnQsXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmhvcml6b250YWxEaXJlY3Rpb24sXG4gICAgICAgICAgICBjb25uZWN0ZWRGaXQuaG9yaXpvbnRhbE9mZnNldCA/IGNvbm5lY3RlZEZpdC5ob3Jpem9udGFsT2Zmc2V0IDogMCk7XG4gICAgICAgIGNvbm5lY3RlZEZpdC5yaWdodCA9IGNvbm5lY3RlZEZpdC5sZWZ0ICsgY29ubmVjdGVkRml0LmNvbnRlbnRFbGVtZW50UmVjdC53aWR0aDtcbiAgICAgICAgY29ubmVjdGVkRml0LmZpdEhvcml6b250YWwgPSB7XG4gICAgICAgICAgICAgICAgYmFjazogTWF0aC5yb3VuZChjb25uZWN0ZWRGaXQubGVmdCksXG4gICAgICAgICAgICAgICAgZm9yd2FyZDogTWF0aC5yb3VuZChjb25uZWN0ZWRGaXQudmlld1BvcnRSZWN0LndpZHRoIC0gY29ubmVjdGVkRml0LnJpZ2h0KVxuICAgICAgICAgICAgfTtcblxuICAgICAgICBjb25uZWN0ZWRGaXQudG9wID0gdGhpcy5jYWxjdWxhdGVUb3AoXG4gICAgICAgICAgICBjb25uZWN0ZWRGaXQudGFyZ2V0UmVjdCxcbiAgICAgICAgICAgIGNvbm5lY3RlZEZpdC5jb250ZW50RWxlbWVudFJlY3QsXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnZlcnRpY2FsU3RhcnRQb2ludCxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudmVydGljYWxEaXJlY3Rpb24sXG4gICAgICAgICAgICBjb25uZWN0ZWRGaXQudmVydGljYWxPZmZzZXQgPyBjb25uZWN0ZWRGaXQudmVydGljYWxPZmZzZXQgOiAwKTtcbiAgICAgICAgY29ubmVjdGVkRml0LmJvdHRvbSA9IGNvbm5lY3RlZEZpdC50b3AgKyBjb25uZWN0ZWRGaXQuY29udGVudEVsZW1lbnRSZWN0LmhlaWdodDtcbiAgICAgICAgY29ubmVjdGVkRml0LmZpdFZlcnRpY2FsID0ge1xuICAgICAgICAgICAgYmFjazogTWF0aC5yb3VuZChjb25uZWN0ZWRGaXQudG9wKSxcbiAgICAgICAgICAgIGZvcndhcmQ6IE1hdGgucm91bmQoY29ubmVjdGVkRml0LnZpZXdQb3J0UmVjdC5oZWlnaHQgLSBjb25uZWN0ZWRGaXQuYm90dG9tKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsZWZ0IGJvcmRlciBvZiB0aGUgZWxlbWVudCBpZiBpdCBnZXRzIHBvc2l0aW9uZWRcbiAgICAgKiB3aXRoIHByb3ZpZGVkIHN0YXJ0IHBvaW50IGFuZCBkaXJlY3Rpb25cbiAgICAgKiBAcGFyYW0gdGFyZ2V0UmVjdCBSZWN0YW5nbGUgb2YgdGhlIHRhcmdldCB3aGVyZSBlbGVtZW50IGlzIGF0dGFjaGVkXG4gICAgICogQHBhcmFtIGVsZW1lbnRSZWN0IFJlY3RhbmdsZSBvZiB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSBzdGFydFBvaW50IFN0YXJ0IHBvaW50IG9mIHRoZSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIERpcmVjdGlvbiBpbiB3aGljaCB0byBzaG93IHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNhbGN1bGF0ZUxlZnQoXG4gICAgICAgIHRhcmdldFJlY3Q6IENsaWVudFJlY3QsIGVsZW1lbnRSZWN0OiBDbGllbnRSZWN0LCBzdGFydFBvaW50OiBIb3Jpem9udGFsQWxpZ25tZW50LCBkaXJlY3Rpb246IEhvcml6b250YWxBbGlnbm1lbnQsIG9mZnNldD86IG51bWJlcik6XG4gICAgICAgIG51bWJlciB7XG4gICAgICAgIHJldHVybiB0YXJnZXRSZWN0LnJpZ2h0ICsgdGFyZ2V0UmVjdC53aWR0aCAqIHN0YXJ0UG9pbnQgKyBlbGVtZW50UmVjdC53aWR0aCAqIGRpcmVjdGlvbiArIG9mZnNldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgdG9wIGJvcmRlciBvZiB0aGUgZWxlbWVudCBpZiBpdCBnZXRzIHBvc2l0aW9uZWRcbiAgICAgKiB3aXRoIHByb3ZpZGVkIHBvc2l0aW9uIHNldHRpbmdzIHJlbGF0ZWQgdG8gdGhlIHRhcmdldFxuICAgICAqIEBwYXJhbSB0YXJnZXRSZWN0IFJlY3RhbmdsZSBvZiB0aGUgdGFyZ2V0IHdoZXJlIGVsZW1lbnQgaXMgYXR0YWNoZWRcbiAgICAgKiBAcGFyYW0gZWxlbWVudFJlY3QgUmVjdGFuZ2xlIG9mIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIHN0YXJ0UG9pbnQgU3RhcnQgcG9pbnQgb2YgdGhlIHRhcmdldFxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gRGlyZWN0aW9uIGluIHdoaWNoIHRvIHNob3cgdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY2FsY3VsYXRlVG9wKFxuICAgICAgICB0YXJnZXRSZWN0OiBDbGllbnRSZWN0LCBlbGVtZW50UmVjdDogQ2xpZW50UmVjdCwgc3RhcnRQb2ludDogVmVydGljYWxBbGlnbm1lbnQsIGRpcmVjdGlvbjogVmVydGljYWxBbGlnbm1lbnQsIG9mZnNldD86IG51bWJlcik6XG4gICAgICAgIG51bWJlciB7XG4gICAgICAgIHJldHVybiB0YXJnZXRSZWN0LmJvdHRvbSArIHRhcmdldFJlY3QuaGVpZ2h0ICogc3RhcnRQb2ludCArIGVsZW1lbnRSZWN0LmhlaWdodCAqIGRpcmVjdGlvbiArIG9mZnNldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGZpdCBpbiB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSBjb25uZWN0ZWRGaXQgY29ubmVjdGVkRml0IG9iamVjdCBjb250YWluaW5nIGFsbCBuZWNlc3NhcnkgcGFyYW1ldGVyc1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBzaG91bGRGaXRJblZpZXdQb3J0KGNvbm5lY3RlZEZpdDogQ29ubmVjdGVkRml0KSB7XG4gICAgICAgIHJldHVybiBjb25uZWN0ZWRGaXQuZml0SG9yaXpvbnRhbC5iYWNrIDwgMCB8fCBjb25uZWN0ZWRGaXQuZml0SG9yaXpvbnRhbC5mb3J3YXJkIDwgMCB8fFxuICAgICAgICAgICAgY29ubmVjdGVkRml0LmZpdFZlcnRpY2FsLmJhY2sgPCAwIHx8IGNvbm5lY3RlZEZpdC5maXRWZXJ0aWNhbC5mb3J3YXJkIDwgMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXRzIHRoZSBlbGVtZW50IGludG8gdmlld3BvcnQgYWNjb3JkaW5nIHRvIHRoZSBwb3NpdGlvbiBzZXR0aW5nc1xuICAgICAqIEBwYXJhbSBlbGVtZW50IGVsZW1lbnQgdG8gZml0IGluIHZpZXdwb3J0XG4gICAgICogQHBhcmFtIGNvbm5lY3RlZEZpdCBjb25uZWN0ZWRGaXQgb2JqZWN0IGNvbnRhaW5pbmcgYWxsIG5lY2Vzc2FyeSBwYXJhbWV0ZXJzXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGZpdEluVmlld3BvcnQoXG4gICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBjb25uZWN0ZWRGaXQ6IENvbm5lY3RlZEZpdCk7XG59XG4iXX0=